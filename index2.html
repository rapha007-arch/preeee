<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ö° AVIATOR PRO ‚Ä¢ REAL MADRID ‚ö°</title>
    <style>
        /* STYLES G√âN√âRAUX - TH√àME REAL MADRID */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0a14 0%, #0f0f2a 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1.5rem 1rem;
            color: #ffffff;
        }

        .container {
            width: 100%;
            max-width: 520px;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
        }

        .header::after {
            content: '';
            display: block;
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, transparent, #ffd700, #4a2c9c, #ffd700, transparent);
            margin: 0.75rem auto 0;
            border-radius: 3px;
        }

        h1 {
            font-family: 'Montserrat', 'Trebuchet MS', sans-serif;
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #ffffff 0%, #f5f0e6 50%, #ffd700 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 1px;
            margin-bottom: 0.25rem;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .subtitle {
            color: #a0a0c0;
            font-size: 1rem;
            font-weight: 400;
            letter-spacing: 0.5px;
        }

        .badge {
            display: inline-block;
            background: rgba(74, 44, 156, 0.3);
            backdrop-filter: blur(5px);
            border: 1px solid #ffd700;
            border-radius: 30px;
            padding: 0.25rem 1rem;
            font-size: 0.8rem;
            color: #ffd700;
            margin-top: 0.5rem;
        }

        .card {
            background: rgba(20, 20, 40, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.25);
            border-radius: 28px;
            padding: 1.75rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 215, 0, 0.1) inset;
            margin-bottom: 1.5rem;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .card-header h2 {
            color: #ffffff;
            font-size: 1.35rem;
            font-weight: 600;
            letter-spacing: -0.5px;
        }

        .card-header span {
            font-size: 1.8rem;
        }

        .gold-text {
            color: #ffd700;
            font-weight: 600;
        }

        .tab-container {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            justify-content: center;
            background: rgba(10, 10, 25, 0.7);
            backdrop-filter: blur(8px);
            padding: 0.6rem;
            border-radius: 40px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .tab {
            padding: 0.7rem 1.25rem;
            background: transparent;
            border: none;
            border-radius: 30px;
            color: #a0a0c0;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.25s ease;
            white-space: nowrap;
        }

        .tab:hover {
            color: #ffffff;
            background: rgba(255, 215, 0, 0.1);
        }

        .tab.active {
            background: linear-gradient(135deg, #ffd700, #ffb800);
            color: #0a0a14;
            font-weight: 700;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }

        .page {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0.5; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page.active-page {
            display: block;
        }

        .section-bg {
            background: rgba(30, 30, 50, 0.5);
            border-radius: 24px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 215, 0, 0.15);
        }

        .input-group {
            margin-bottom: 1.25rem;
        }

        label {
            display: block;
            font-size: 0.85rem;
            font-weight: 500;
            color: #b0b0d0;
            margin-bottom: 0.5rem;
            letter-spacing: 0.3px;
            text-transform: uppercase;
        }

        input {
            width: 100%;
            padding: 1rem 1.25rem;
            background: rgba(15, 15, 30, 0.7);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 18px;
            font-size: 1rem;
            color: #ffffff;
            transition: all 0.2s ease;
            font-family: 'Inter', monospace;
        }

        input:focus {
            outline: none;
            border-color: #ffd700;
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.2);
            background: rgba(20, 20, 40, 0.9);
        }

        input::placeholder {
            color: #5a5a80;
            font-size: 0.9rem;
        }

        .flex-row {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }

        .menu-button {
            width: 100%;
            padding: 1.1rem 1.5rem;
            background: linear-gradient(135deg, #ffd700, #e5b800);
            border: none;
            border-radius: 18px;
            font-size: 1.1rem;
            font-weight: 700;
            color: #0a0a14;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            box-shadow: 0 8px 20px rgba(255, 215, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .menu-button.small {
            padding: 0.9rem 1.25rem;
            font-size: 1rem;
        }

        .menu-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(255, 215, 0, 0.5);
            background: linear-gradient(135deg, #ffde33, #ffc800);
        }

        .menu-button:active {
            transform: translateY(0);
        }

        .copy-button {
            padding: 0.75rem 1.25rem;
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid #ffd700;
            border-radius: 14px;
            color: #ffd700;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s ease;
            backdrop-filter: blur(5px);
        }

        .copy-button:hover {
            background: #ffd700;
            color: #0a0a14;
        }

        .result-box {
            margin-top: 1.75rem;
            padding: 1.75rem;
            background: rgba(30, 30, 55, 0.7);
            backdrop-filter: blur(5px);
            border: 1px solid #ffd700;
            border-radius: 24px;
            text-align: center;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.15);
        }

        .result-time {
            font-size: 3rem;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            color: #ffd700;
            margin-bottom: 0.5rem;
            letter-spacing: 2px;
        }

        .result-multiplier {
            font-size: 1.75rem;
            color: #ffffff;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .result-label {
            font-size: 0.8rem;
            color: #8a8ab0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .footer {
            text-align: center;
            color: #4a4a70;
            font-size: 0.75rem;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 215, 0, 0.15);
        }

        .footer span {
            color: #ffd700;
            font-weight: 600;
        }

        .warning-box {
            background: linear-gradient(145deg, rgba(74, 44, 156, 0.3), rgba(20, 20, 50, 0.5));
            border-left: 4px solid #ffd700;
            padding: 1.25rem;
            border-radius: 18px;
            margin-bottom: 1.5rem;
            color: #e0e0ff;
            font-style: normal;
            border: 1px solid rgba(255, 215, 0, 0.3);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .badge-rm {
            background: #4a2c9c;
            color: #ffd700;
            padding: 0.2rem 0.8rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            display: inline-block;
        }

        /* Historique styling */
        .history-entry {
            background: rgba(30, 30, 55, 0.5);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 16px;
            padding: 1rem;
            margin-bottom: 0.75rem;
            backdrop-filter: blur(4px);
            transition: all 0.2s;
        }

        .history-entry:hover {
            border-color: #ffd700;
            background: rgba(40, 40, 70, 0.6);
        }

        .history-type {
            color: #ffd700;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .history-time {
            color: white;
            font-family: monospace;
            font-size: 1rem;
        }

        .history-value {
            color: #b0b0ff;
            font-size: 0.9rem;
            margin-top: 0.25rem;
        }

        /* Scrollbar personnalis√©e */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(20, 20, 40, 0.5);
        }

        ::-webkit-scrollbar-thumb {
            background: #ffd700;
            border-radius: 10px;
        }
    </style>
    <!-- Import Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- HEADER REAL MADRID -->
        <div class="header">
            <h1>‚ö°RM AVIATOR‚ö°</h1>
            <div class="subtitle">Hala Madrid ‚Ä¢ Pr√©diction Pro</div>
            <div class="badge">#Vamos</div>
        </div>

        <!-- BARRE D'ONGLETS (Navigation simplifi√©e) -->
        <div class="tab-container" id="tabContainer">
            <div class="tab active" data-page="home">üè† Accueil</div>
            <div class="tab" data-page="decollage">üõ´ Flash</div>
            <div class="tab" data-page="supersonique">‚úàÔ∏è Supersonic</div>
            <div class="tab" data-page="turbo">‚ö° Turbo</div>
            <div class="tab" data-page="moisson">üåæ Moisson</div>
            <div class="tab" data-page="historique">üìã Historique</div>
        </div>

        <!-- PAGE D'ACCUEIL (Historique uniquement) -->
        <div id="homePage" class="page active-page">
            <div class="card">
                <div class="warning-box">
                    <span style="color:#ffd700; font-weight:700;">‚öΩ REAL MADRID PROTOCOL ‚öΩ</span><br>
                    ‚ö†Ô∏è Auto X3 max en haut, en bas selon pr√©f√©rence. Apr√®s pr√©diction verte, entr√©e possible ou attente (rose possible). Bon gain !<br><br>
                    <span style="color: #b0b0ff;">"Tout partager, rester unis. Hala Madrid!"</span>
                </div>

                <!-- Bouton Historique uniquement -->
                <div class="menu-grid">
                    <div class="menu-item">
                        <button class="menu-button small" data-page="historique">
                            <span>üìã</span> Historique des pr√©dictions
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE D√âCOLLAGE FLASH -->
        <div id="decollagePage" class="page">
            <div class="card">
                <div class="card-header">
                    <span>üõ´</span>
                    <h2>D√©collage Flash <span class="gold-text">x3+</span></h2>
                </div>
                
                <div class="section-bg">
                    <div class="input-group">
                        <label>üïê Heure (HH:MM)</label>
                        <input type="text" id="decollageHeure" placeholder="12:25" inputmode="numeric">
                    </div>
                    <div class="input-group">
                        <label>üî¢ Hex (2 chiffres)</label>
                        <input type="text" id="decollageHex" placeholder="24" inputmode="numeric" maxlength="2">
                    </div>
                    <div class="input-group">
                        <label>üî¢ D√©c (2 chiffres)</label>
                        <input type="text" id="decollageDec" placeholder="36" inputmode="numeric" maxlength="2">
                    </div>
                    
                    <div class="flex-row">
                        <button class="menu-button" id="decollageCalculer" style="padding: 1rem;">Calculer</button>
                        <button class="copy-button" id="decollageEffacer">Effacer</button>
                    </div>

                    <div id="decollageResult" class="result-box" style="display: none;">
                        <div class="result-time" id="decollageTime">12:34:56</div>
                        <div class="result-multiplier" id="decollageMulti">x7.89</div>
                        <div class="result-label">Multiplicateur pr√©dit</div>
                        <button class="copy-button" id="decollageCopy" style="margin-top: 1rem;">Copier</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE SUPERSONIQUE -->
        <div id="supersoniquePage" class="page">
            <div class="card">
                <div class="card-header">
                    <span>‚úàÔ∏è</span>
                    <h2>Supersonique <span class="gold-text">x5+</span></h2>
                </div>
                
                <div class="section-bg">
                    <div class="input-group">
                        <label>üïê Heure (HH:MM)</label>
                        <input type="text" id="supersoniqueHeure" placeholder="12:25">
                    </div>
                    <div class="input-group">
                        <label>üî¢ Hex (2 chiffres)</label>
                        <input type="text" id="supersoniqueHex" placeholder="24" maxlength="2">
                    </div>
                    <div class="input-group">
                        <label>üî¢ D√©c (2 chiffres)</label>
                        <input type="text" id="supersoniqueDec" placeholder="36" maxlength="2">
                    </div>
                    
                    <button class="menu-button" id="supersoniqueCalculer">Calculer</button>

                    <div id="supersoniqueResult" class="result-box" style="display: none;">
                        <div class="result-time" id="supersoniqueTime">12:34:56</div>
                        <div class="result-multiplier" id="supersoniqueMulti">x12.34</div>
                        <div class="result-label">Multiplicateur pr√©dit</div>
                        <button class="copy-button" id="supersoniqueCopy" style="margin-top: 1rem;">Copier</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE TURBO -->
        <div id="turboPage" class="page">
            <div class="card">
                <div class="card-header">
                    <span>‚ö°</span>
                    <h2>Turbo <span class="gold-text">Pr√©cision</span></h2>
                </div>
                
                <div class="section-bg">
                    <div class="input-group">
                        <label>üïê Heure d√©but (HH:MM)</label>
                        <input type="text" id="turboHeure" placeholder="12:25">
                    </div>
                    <div class="input-group">
                        <label>üìä Multiplicateur bleu</label>
                        <input type="text" id="turboMulti" placeholder="1.45">
                    </div>
                    <div class="input-group">
                        <label>üî¢ 4 derniers chiffres</label>
                        <input type="text" id="turboDeci" placeholder="3842" maxlength="4">
                    </div>
                    
                    <button class="menu-button" id="turboCalculer">Calculer</button>

                    <div id="turboResult" class="result-box" style="display: none;">
                        <div class="result-time" id="turboTime">12:34:56</div>
                        <div class="result-multiplier" id="turboMultiResult">x2.34</div>
                        <div class="result-label">Zone s√©curis√©e</div>
                        <button class="copy-button" id="turboCopy" style="margin-top: 1rem;">Copier</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE MOISSON DOR√âE -->
        <div id="moissonPage" class="page">
            <div class="card">
                <div class="card-header">
                    <span>üåæ</span>
                    <h2>Moisson Dor√©e</h2>
                </div>
                
                <div class="section-bg">
                    <div class="input-group">
                        <label>üïê Heure du tour</label>
                        <input type="text" id="moissonHeure" placeholder="12:25">
                    </div>
                    <div class="input-group">
                        <label>üå± Semence serveur (2 car.)</label>
                        <input type="text" id="moissonServeur" placeholder="a4" maxlength="2">
                    </div>
                    <div class="input-group">
                        <label>üé≤ 3 semences joueurs</label>
                        <div class="flex-row">
                            <input type="text" id="moissonJ1" placeholder="a" maxlength="1">
                            <input type="text" id="moissonJ2" placeholder="2" maxlength="1">
                            <input type="text" id="moissonJ3" placeholder="3" maxlength="1">
                        </div>
                    </div>
                    
                    <button class="menu-button" id="moissonCalculer">Calculer</button>

                    <div id="moissonResult" class="result-box" style="display: none;">
                        <div class="result-time" id="moissonTime">12:34:56</div>
                        <div class="result-multiplier" id="moissonMulti">x7.89</div>
                        <div class="result-label">Multiplicateur</div>
                        <button class="copy-button" id="moissonCopy" style="margin-top: 1rem;">Copier</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE HISTORIQUE -->
        <div id="historiquePage" class="page">
            <div class="card">
                <div class="card-header">
                    <span>üìã</span>
                    <h2>Historique</h2>
                </div>
                <p style="color: #a0a0c0; margin-bottom: 1.5rem;">30 derni√®res pr√©dictions</p>
                
                <div id="historiqueContent" style="max-height: 450px; overflow-y: auto; padding-right: 0.5rem;">
                    <p style="color: #5a5a80; text-align: center; padding: 2rem;">Aucun historique</p>
                </div>
            </div>
        </div>

        <div class="footer">
            <span>‚ö° HALA MADRID ‚ö°</span> ‚Ä¢ outil de pr√©diction pro ‚Ä¢ v2.0
        </div>
    </div>

    <script>
        // ============================================
        // FONCTIONS DE CALCUL (inchang√©es)
        // ============================================
        
        function vT(e, t, r, n = false) {
            const s = e.split(":");
            if (s.length !== 2) return null;
            let i = parseInt(s[0], 10), o = parseInt(s[1], 10);
            if (isNaN(i) || isNaN(o)) return null;

            const a = parseInt(t[0], 10), l = parseInt(t[1], 10);
            if (isNaN(a) || isNaN(l)) return null;

            const u = Math.abs(a - l);
            o += u;

            const c = parseInt(r[0], 10), h = parseInt(r[1], 10);
            if (isNaN(c) || isNaN(h)) return null;
            let f = c * h;

            if (n) { f += 15; o += 2; } else { o += 1; }

            f -= 20;
            if (f < 0) { f += 60; o -= 1; }
            f += 67;
            if (f > 59) { o += Math.floor(f / 60); f = f % 60; }
            if (o < 0) { i -= 1; o += 60; }
            if (o > 59) { i += Math.floor(o / 60); o = o % 60; }
            i = (i % 24 + 24) % 24;

            const w = a * 7 + l * 13 + c * 17 + h * 23 + i * 3 + o * 11 + f * 5;
            let m;
            if (n) {
                const v = 10 + w % 40, _ = w * 7 % 100;
                m = `x${v}.${_.toString().padStart(2, "0")}`;
            } else {
                const v = 5 + w % 10, _ = w * 13 % 100;
                m = `x${v}.${_.toString().padStart(2, "0")}`;
            }

            const x = y => y.toString().padStart(2, "0");
            return { time: `${x(i)}:${x(o)}:${x(f)}`, multiplier: m };
        }

        function calculateTurbo(heure, multiplicateur, deci4) {
            const s = heure.split(":");
            let k = parseInt(s[0], 10), E = parseInt(s[1], 10);
            if (isNaN(k) || isNaN(E)) return null;

            const multiStr = multiplicateur.replace(/[^0-9.]/g, '');
            const deciStr = deci4.replace(/\D/g, '');
            if (deciStr.length !== 4) return null;

            const T = parseInt(deciStr[0], 10), C = parseInt(deciStr[1], 10);
            const R = parseInt(deciStr[2], 10), F = parseInt(deciStr[3], 10);
            if ([T, C, R, F].some(isNaN)) return null;

            E += T;
            let I = Math.abs(C - R) * F;
            I -= 20;
            if (I < 0) { I += 60; E -= 1; }
            I += 67;
            if (I > 59) { E += Math.floor(I / 60); I = I % 60; }
            if (I > 59) { E += Math.floor(I / 60); I = I % 60; }
            if (E < 0) { k -= 1; E += 60; }
            if (E > 59) { k += Math.floor(E / 60); E = E % 60; }
            k = (k % 24 + 24) % 24;

            const lastChar = multiStr.slice(-1);
            const Q = parseInt(lastChar, 10);
            const B = Q % 2 !== 0;
            const V = B ? 2 : 3;
            const P = B ? 4 : 5;

            const j = T * 7 + C * 13 + R * 17 + F * 23 + k * 3 + E * 11 + I * 5 + Q * 19;
            const $ = j * 13 % 100;
            const targetMulti = `x${V + j % (P - V)}.${$.toString().padStart(2, "0")}`;

            const q = ee => ee.toString().padStart(2, "0");
            const time = `${q(k)}:${q(E)}:${q(I)}`;

            return { time, targetMultiplier: targetMulti };
        }

        function calculateMoisson(heure, semenceServeur, s1, s2, s3) {
            const s = heure.split(":");
            let R = parseInt(s[0], 10), F = parseInt(s[1], 10);
            if (isNaN(R) || isNaN(F)) return null;

            const charToVal = (c) => {
                if (!c || c.length === 0) return 0;
                const ch = c.toLowerCase();
                if (ch >= '0' && ch <= '9') return parseInt(ch, 10);
                return ch.charCodeAt(0) - 96;
            };

            const I = charToVal(semenceServeur[0] || '0');
            const J = charToVal(semenceServeur[1] || '0');
            const L = charToVal(s1);
            const Q = charToVal(s2);
            const B = charToVal(s3);

            let j = 145 + (I * 31 + J * 37 + L * 41 + Q * 43 + B * 47 + R * 53 + F * 59) % 194;
            let $ = F * 60 + j;
            $ -= 20;
            $ += 67;

            let z = Math.floor($ / 60);
            let M = $ % 60;
            if (M < 0) { M += 60; z -= 1; }
            R += Math.floor(z / 60);
            z = z % 60;
            if (z < 0) { R -= 1; z += 60; }
            R = (R % 24 + 24) % 24;

            const q = I * 7 + J * 11 + L * 13 + Q * 17 + B * 19 + R * 23 + z * 29 + M * 31;
            const xe = 3 + q % 12;
            const ee = q * 17 % 100;
            const multiplier = `x${xe}.${ee.toString().padStart(2, "0")}`;

            const format = n => n.toString().padStart(2, "0");
            return { time: `${format(R)}:${format(z)}:${format(M)}`, multiplier };
        }

        // ============================================
        // GESTION DES PAGES
        // ============================================
        
        const tabs = document.querySelectorAll('.tab');
        const pages = document.querySelectorAll('.page');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const pageId = tab.dataset.page + 'Page';
                
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                pages.forEach(p => p.classList.remove('active-page'));
                const targetPage = document.getElementById(pageId);
                if (targetPage) targetPage.classList.add('active-page');
            });
        });

        // Boutons data-page
        document.querySelectorAll('[data-page]').forEach(btn => {
            btn.addEventListener('click', () => {
                const pageId = btn.dataset.page + 'Page';
                const targetTab = Array.from(tabs).find(t => t.dataset.page === btn.dataset.page);
                if (targetTab) targetTab.click();
            });
        });

        // ============================================
        // D√âCOLLAGE FLASH
        // ============================================
        const decollageHeure = document.getElementById('decollageHeure');
        const decollageHex = document.getElementById('decollageHex');
        const decollageDec = document.getElementById('decollageDec');
        const decollageCalculer = document.getElementById('decollageCalculer');
        const decollageEffacer = document.getElementById('decollageEffacer');
        const decollageResult = document.getElementById('decollageResult');
        const decollageTime = document.getElementById('decollageTime');
        const decollageMulti = document.getElementById('decollageMulti');
        const decollageCopy = document.getElementById('decollageCopy');

        decollageHeure.addEventListener('input', (e) => {
            let val = e.target.value.replace(/\D/g, '').slice(0, 4);
            if (val.length > 2) val = val.slice(0, 2) + ':' + val.slice(2);
            e.target.value = val;
        });

        decollageCalculer.addEventListener('click', () => {
            const heure = decollageHeure.value;
            const hex = decollageHex.value;
            const dec = decollageDec.value;
            
            if (heure.length === 5 && hex.length === 2 && dec.length === 2) {
                const result = vT(heure, hex, dec, false);
                if (result) {
                    decollageTime.textContent = result.time;
                    decollageMulti.textContent = result.multiplier;
                    decollageResult.style.display = 'block';
                    saveToHistory('decollage', { time: result.time, multiplier: result.multiplier });
                }
            } else alert('Veuillez remplir tous les champs');
        });

        decollageEffacer.addEventListener('click', () => {
            decollageHeure.value = decollageHex.value = decollageDec.value = '';
            decollageResult.style.display = 'none';
        });

        decollageCopy.addEventListener('click', () => {
            navigator.clipboard.writeText(`${decollageTime.textContent} | ${decollageMulti.textContent}`);
            alert('Copi√© ‚úì');
        });

        // ============================================
        // SUPERSONIQUE
        // ============================================
        const supersoniqueHeure = document.getElementById('supersoniqueHeure');
        const supersoniqueHex = document.getElementById('supersoniqueHex');
        const supersoniqueDec = document.getElementById('supersoniqueDec');
        const supersoniqueCalculer = document.getElementById('supersoniqueCalculer');
        const supersoniqueResult = document.getElementById('supersoniqueResult');
        const supersoniqueTime = document.getElementById('supersoniqueTime');
        const supersoniqueMulti = document.getElementById('supersoniqueMulti');
        const supersoniqueCopy = document.getElementById('supersoniqueCopy');

        supersoniqueHeure.addEventListener('input', (e) => {
            let val = e.target.value.replace(/\D/g, '').slice(0, 4);
            if (val.length > 2) val = val.slice(0, 2) + ':' + val.slice(2);
            e.target.value = val;
        });

        supersoniqueCalculer.addEventListener('click', () => {
            const heure = supersoniqueHeure.value;
            const hex = supersoniqueHex.value;
            const dec = supersoniqueDec.value;
            
            if (heure.length === 5 && hex.length === 2 && dec.length === 2) {
                const result = vT(heure, hex, dec, true);
                if (result) {
                    supersoniqueTime.textContent = result.time;
                    supersoniqueMulti.textContent = result.multiplier;
                    supersoniqueResult.style.display = 'block';
                    saveToHistory('supersonique', { time: result.time, multiplier: result.multiplier });
                }
            } else alert('Veuillez remplir tous les champs');
        });

        supersoniqueCopy.addEventListener('click', () => {
            navigator.clipboard.writeText(`${supersoniqueTime.textContent} | ${supersoniqueMulti.textContent}`);
            alert('Copi√© ‚úì');
        });

        // ============================================
        // TURBO
        // ============================================
        const turboHeure = document.getElementById('turboHeure');
        const turboMulti = document.getElementById('turboMulti');
        const turboDeci = document.getElementById('turboDeci');
        const turboCalculer = document.getElementById('turboCalculer');
        const turboResult = document.getElementById('turboResult');
        const turboTime = document.getElementById('turboTime');
        const turboMultiResult = document.getElementById('turboMultiResult');
        const turboCopy = document.getElementById('turboCopy');

        turboHeure.addEventListener('input', (e) => {
            let val = e.target.value.replace(/\D/g, '').slice(0, 4);
            if (val.length > 2) val = val.slice(0, 2) + ':' + val.slice(2);
            e.target.value = val;
        });

        turboMulti.addEventListener('input', (e) => {
            let val = e.target.value.replace(/[^0-9.]/g, '');
            if ((val.match(/\./g) || []).length > 1) val = val.replace(/\.+$/, '');
            e.target.value = val;
        });

        turboDeci.addEventListener('input', (e) => {
            e.target.value = e.target.value.replace(/\D/g, '').slice(0, 4);
        });

        turboCalculer.addEventListener('click', () => {
            const heure = turboHeure.value;
            const multi = turboMulti.value;
            const deci = turboDeci.value;
            
            if (heure.length === 5 && multi.length > 0 && deci.length === 4) {
                const result = calculateTurbo(heure, multi, deci);
                if (result) {
                    turboTime.textContent = result.time;
                    turboMultiResult.textContent = result.targetMultiplier;
                    turboResult.style.display = 'block';
                    saveToHistory('turbo', { time: result.time, targetMultiplier: result.targetMultiplier });
                }
            } else alert('Veuillez remplir tous les champs');
        });

        turboCopy.addEventListener('click', () => {
            navigator.clipboard.writeText(`${turboTime.textContent} | ${turboMultiResult.textContent}`);
            alert('Copi√© ‚úì');
        });

        // ============================================
        // MOISSON DOR√âE
        // ============================================
        const moissonHeure = document.getElementById('moissonHeure');
        const moissonServeur = document.getElementById('moissonServeur');
        const moissonJ1 = document.getElementById('moissonJ1');
        const moissonJ2 = document.getElementById('moissonJ2');
        const moissonJ3 = document.getElementById('moissonJ3');
        const moissonCalculer = document.getElementById('moissonCalculer');
        const moissonResult = document.getElementById('moissonResult');
        const moissonTime = document.getElementById('moissonTime');
        const moissonMulti = document.getElementById('moissonMulti');
        const moissonCopy = document.getElementById('moissonCopy');

        moissonHeure.addEventListener('input', (e) => {
            let val = e.target.value.replace(/\D/g, '').slice(0, 4);
            if (val.length > 2) val = val.slice(0, 2) + ':' + val.slice(2);
            e.target.value = val;
        });

        moissonServeur.addEventListener('input', (e) => {
            e.target.value = e.target.value.replace(/[^a-zA-Z0-9]/g, '').slice(0, 2);
        });

        [moissonJ1, moissonJ2, moissonJ3].forEach(input => {
            input.addEventListener('input', (e) => {
                e.target.value = e.target.value.replace(/[^a-zA-Z0-9]/g, '').slice(0, 1);
            });
        });

        moissonCalculer.addEventListener('click', () => {
            const heure = moissonHeure.value;
            const serveur = moissonServeur.value;
            const j1 = moissonJ1.value;
            const j2 = moissonJ2.value;
            const j3 = moissonJ3.value;
            
            if (heure.length === 5 && serveur.length === 2 && j1 && j2 && j3) {
                const result = calculateMoisson(heure, serveur, j1, j2, j3);
                if (result) {
                    moissonTime.textContent = result.time;
                    moissonMulti.textContent = result.multiplier;
                    moissonResult.style.display = 'block';
                    saveToHistory('moisson', { time: result.time, multiplier: result.multiplier });
                }
            } else alert('Veuillez remplir tous les champs');
        });

        moissonCopy.addEventListener('click', () => {
            navigator.clipboard.writeText(`${moissonTime.textContent} | ${moissonMulti.textContent}`);
            alert('Copi√© ‚úì');
        });

        // ============================================
        // HISTORIQUE
        // ============================================
        function saveToHistory(type, data) {
            const historyKey = `history-${type}`;
            let history = JSON.parse(localStorage.getItem(historyKey) || '[]');
            const entry = { id: Date.now(), ...data };
            history = [entry, ...history].slice(0, 20);
            localStorage.setItem(historyKey, JSON.stringify(history));
            updateHistoryDisplay();
        }

        function updateHistoryDisplay() {
            const historyContent = document.getElementById('historiqueContent');
            const types = ['decollage', 'supersonique', 'turbo', 'moisson'];
            const allEntries = [];
            
            types.forEach(type => {
                const key = `history-${type}`;
                const entries = JSON.parse(localStorage.getItem(key) || '[]');
                entries.forEach(entry => {
                    allEntries.push({
                        ...entry,
                        type: type === 'decollage' ? 'üõ´ Flash' : 
                              type === 'supersonique' ? '‚úàÔ∏è Supersonic' :
                              type === 'turbo' ? '‚ö° Turbo' : 'üåæ Moisson',
                        display: type === 'turbo' ? entry.targetMultiplier : entry.multiplier
                    });
                });
            });
            
            allEntries.sort((a, b) => b.id - a.id);
            
            if (allEntries.length === 0) {
                historyContent.innerHTML = '<p style="color: #5a5a80; text-align: center; padding: 2rem;">Aucun historique</p>';
                return;
            }
            
            let html = '';
            allEntries.slice(0, 30).forEach(entry => {
                html += `
                    <div class="history-entry">
                        <div style="display: flex; justify-content: space-between;">
                            <span class="history-type">${entry.type}</span>
                            <span class="history-time">${entry.time}</span>
                        </div>
                        <div class="history-value">${entry.display}</div>
                    </div>
                `;
            });
            historyContent.innerHTML = html;
        }

        updateHistoryDisplay();
    </script>
</body>
</html>
